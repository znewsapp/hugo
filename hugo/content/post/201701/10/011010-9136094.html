+++
date = "2017-01-10T10:00:00"
title = "一組 ↓ ↑ A 摁出去，遊戲裏的動作的怎麼連起來的？"
titleimage = "http://pic3.zhimg.com/f43d2d567a5d6aa99fb9aa30eff58caa.jpg"
ga = 011010
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">遊戲的連招動作是怎麼設計的？代碼上又是怎樣實現的？</h2>

<div class="answer">



<div class="content">
<p>這個問題我個人比較感興趣，首先我做了 13 年遊戲，策劃、程序都做過，動作遊戲做過幾款大作（2d 爲主，外包形式，非國內遊戲），這裏我簡單說下實現方面是如何做到連招的。</p>
<p>首先你必須瞭解一個概念，每一個角色的動作（包括跳、走路還有通常說的技能、輕拳、重腳之類的），我們都把它歸納爲&ldquo;一個動作&rdquo;，通常來說，一個動作是不具備任何屬性的，除非這些屬性是可以簡單歸納的（下面詳細說），這裏是一個遊戲設計師通常會犯的錯誤，他們認爲一個技能=一個動作=所有屬性歸這個動作，但是動作遊戲（ACT，這裏還包括 FTG 也就是格鬥類）裏面，每一個動作都包含了許多幀，每一幀纔是這個動作的特點，每一幀通常包含以下屬性：</p>
<p>1，動作貼圖：也就是你一套美術動作序列幀的第幾幀（通常這個都是一一對應的，雖然說邏輯和視覺應該分開才能做好遊戲程序）。</p>
<p>2，攻擊矩形：用於判斷自己攻擊命中別人的矩形，通常一些受傷、格擋之類沒有攻擊性的動作是不帶攻擊矩形的，在攻擊矩形中，還會擴展出以下屬性：</p>
<p>1）傷害：通常是百分比，用於和角色的攻擊力相乘得到這個矩形框造成的傷害。</p>
<p>2）破壞：這個矩形框如果作爲命中判斷的話，它會造成目標失去平衡多少，這裏是一個很重要的概念，在一些蹩腳動作遊戲中，你會發現可以無限抽血抽到死，因爲他的動作沒有破壞屬性，所以不會因爲你連續做一個動作導致目標被打飛或者倒地（等保護動作），他們都簡單的採用&ldquo;連招的最後一下&rdquo;這個設定來作爲打破平衡的，所以你發現，只要你不連招，就能抽血抽到死。</p>
<p>3）推動：多方向的力，通常有 x 和 y 方向，決定如果命中後，目標發生的位移。</p>
<p>在這裏你還可以擴展很多屬性，具體根據項目的需要進行。</p>
<p>4）歸類：這個歸類其實可以看做是一個 TAG，因爲這是一個動作中的一幀中的一個矩形，每一個動作會有若干幀連續的，每一幀有若干個攻擊矩形，如果他們都能生效，那麼目標很可能會被一擊斃命等，所以我們約定統一歸類的攻擊矩形，再一次動作中僅生效一次，比如我們在一個踢腿動作中定義了 Kick 作爲歸類，所有的攻擊矩形歸類都是 Kick，那麼這個動作幀任何一幀的任何一個攻擊矩形命中了目標之後，該目標就不會受到這個動作的第 2 次影響。</p>
<p>5）特殊標誌：用於一些面對受攻擊、防禦矩形時候特殊處理邏輯的參數，通常不推薦使用，但如街霸中&ldquo;鎖骨割&rdquo;，侍魂中&ldquo;不意打&rdquo;之類攻擊矩形在下半段，卻要破壞下半段防禦矩形效果的攻擊動作會有這樣的使用。</p>
<p>3，受擊矩形：若干個受攻擊矩形，受到攻擊的時候進入受傷處理的流程，這裏有一個技巧就是，一些需要保護的動作，比如角色倒地了的時候，是不需要受攻擊矩形的。每個受攻擊矩形一樣會有一些擴展屬性：</p>
<p>1）免傷：受到傷害降低多少，通常很多遊戲是不用的，但如果做現在的遊戲，尤其是類 DNF 的，應該會用得上。</p>
<p>2）平衡：對抗破壞的，如果平衡高於破壞，那麼角色的動作不會因爲受到攻擊而被中斷，否則應該當前動作就被中斷了，你可以想象街霸中 2 個角色對踢，然後一起受傷，就是因爲踢腳動作的破壞都高於平衡。</p>
<p>4，防禦矩形：角色的防禦判定矩形，在遭到攻擊矩形碰撞的時候，與攻擊矩形相交的面積和攻擊矩形與受攻擊矩形相交的面積通過一系列算法可以得出本幀是否是防禦成功的，防禦成功的應當按照防禦矩形的屬性來算（屬性同受攻擊矩形，但處理上通常還是會有些區別，這個因遊戲而異）。這裏通常出現的一個概念問題就是方向，因爲每一幀這個概念本身是靜態，你也不應該根據前後幀（尤其是後面的你根本不知道）判斷攻擊來的方向，所以這個算法是個有點意思的東西，我在 GameRes 上曾發帖說過。</p>
<p>5，Cancel 標誌和可 Cancel 標誌：<strong>這裏是題主問的問題的關鍵回答了！</strong>這是 2 個屬性，但我把他們放在一起說，因爲他們的作用是互相的，假如 A 動作的第 5 幀到第 8 幀的&ldquo;可 Cancel 標誌&rdquo;=FF（舉例，所以就算編亂起一個），而 B 動作具有（不論是否作爲動作的屬性）Cancel 標誌=FF，那麼當 A 動作播放到 5-8 幀的任何一幀，都可以由 B 動作來終結 A 動作轉而進入 B 動作，通常的，Cancel 標誌北方在每一幀裏面，B 動作的第一個具有 Cancel 標誌=FF 的幀，就是在 Cancel 了 A 動作之後開始播放的幀。通過這個，策劃在合理的設置之後，就能夠將一連串動作形成連招，甚至連招並不是簡單地一條直線的，你可以 A-&gt;B-&gt;C，也可以 A-&gt;D-&gt;C，也可以 A-&gt;B-&gt;D-&gt;C，你想到什麼都可以，只要策劃填寫對路。</p>
<p>在這裏要強調一點，上述說的都是邏輯層的工作，在遊戲開發中，邏輯與視覺的同步只是一種必要的耦合，但千萬不要因爲視覺所以邏輯，只有因爲邏輯所以視覺。其實原本還想說一些動作遊戲的動作設計技巧，但是我本身是一個程序型的策劃，並不擅長美術製作，有很多朋友是美術型策劃，作爲美術參與了很多著名動作遊戲的開發，所以我就不獻醜了。</p>
</div>
</div>




</div>


</div>
</div>