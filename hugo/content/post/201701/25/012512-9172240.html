+++
date = "2017-01-25T12:00:00"
title = "大誤 · 你們編程的買蘋果好複雜哦"
titleimage = "http://pic1.zhimg.com/359561949fd34be3e3f1fa1f34c51318.jpg"
ga = 012512
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">編程到底難在哪裏？</h2>

<div class="answer">



<div class="content">
<p>普通人：</p>
<p>我今天要買一斤蘋果。</p>
<p>&nbsp;</p>
<p>程序員：</p>
<p>我今天要買一斤蘋果。</p>
<p>因爲我只喜歡紅富士蘋果，所以我只買紅富士蘋果。</p>
<p>我能接受的最高價格是 10 元 / 斤。</p>
<p>正常情況下一斤蘋果用一個袋子能裝下，但是爲防萬一，我會帶兩個袋子。</p>
<p>我知道附近的 3 家水果店，所以我會依次訪問這 3 家水果店。</p>
<p>根據上述條件，我設計出以下的買蘋果的<strong>流程</strong>：</p>
<p>買蘋果流程開始<br> 對水果店 0、水果店 1、水果店 2 依次執行：<br> 拜訪一家水果店流程開始<br> 走到此水果店<br> 如果此水果店沒有開門，則結束當前的&ldquo;拜訪一家水果店流程&rdquo;<br> 如果此水果店沒有蘋果，則結束當前的&ldquo;拜訪一家水果店流程&rdquo;<br> 如果此水果店的蘋果當中沒有紅富士蘋果，則結束當前的&ldquo;拜訪一家水果店流程&rdquo;<br> 如果此水果店的紅富士蘋果剩餘不到一斤，則結束當前的&ldquo;拜訪一家水果店流程&rdquo;<br> 如果此水果店的紅富士蘋果的價格高於 10 元 / 斤，則執行 3 次：<br> 講價流程開始<br> 詢問店主是否願意將價格降到 10 元 / 斤或更低<br> 如果店主願意，則跳過剩餘的&ldquo;講價流程&rdquo;<br> 講價流程結束<br> 如果此水果店的紅富士蘋果的價格仍然高於 10 元 / 斤，則結束當前的&ldquo;拜訪一家水果店流程&rdquo;<br> 打開一個袋子，將其作爲當前的袋子<br> 重複執行以下流程，直到總重量大於一斤：<br> 裝袋一個蘋果流程開始<br> 從所有的不在袋子中的紅富士蘋果中選出最好的一個<br> 如果此蘋果能裝入當前的袋子，則將此蘋果裝入當前的袋子，否則執行：<br> 換袋子流程開始<br> 如果我有剩餘的袋子，則從中任意選出一個並作爲當前的袋子，否則執行：<br> 向店主要袋子流程開始<br> 向店主索要一個袋子<br> 如果店主拒絕給我袋子，則將我的所有袋子裏的所有蘋果取出，然後結束當前的&ldquo;拜訪一家水果店流程&rdquo;<br> 將店主給我的袋子作爲當前的袋子<br> 向店主要袋子流程結束<br> 換袋子流程結束<br> 測量我的所有袋子裏的所有蘋果的總重量<br> 裝袋一個蘋果流程結束<br> 根據我的所有袋子裏的所有蘋果的總重量和店主給出的價格，計算我應付的價格<br> 向店主詢問我應付的價格<br> 如果我不接受店主索要的價格，則執行 3 次：<br> 校對流程開始<br> 向店主解釋我計算出的價格，並詢問其是否同意<br> 如果店主同意，則跳過剩餘的&ldquo;校對流程&rdquo;<br> 校對流程結束<br> 如果我仍然不接受店主索要的價格，則將我的所有袋子裏的所有蘋果取出，然後結束當前的&ldquo;拜訪一家水果店流程&rdquo;<br> 如果我沒帶錢，則將我的所有袋子裏的所有蘋果取出，然後結束當前的&ldquo;拜訪一家水果店流程&rdquo;<br> 付錢拿走蘋果<br> 跳過剩餘的&ldquo;拜訪一家水果店流程&rdquo;<br> 拜訪一家水果店流程結束<br>買蘋果流程結束</p>
<p>這個流程怎麼樣？我來設計一些測試樣例，測試一下這個流程。</p>
<p>測試發現一個問題：如果水果店 0 和水果店 1 都有紅富士蘋果並且價格都低於 10 元 / 斤，而且水果店 1 的價格比水果店 0 更低，那麼我希望買水果店 1 的蘋果，但我設計的流程會讓我買水果店 0 的蘋果。</p>
<p>&nbsp;</p>
<p>爲了解決這個問題，我應該先詢問所有水果店的價格，然後去價格最低的那一家買蘋果。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>經過修改，我重新設計出以下的買蘋果的流程：</p>
<p>買蘋果流程開始<br> 對水果店 0、水果店 1、水果店 2 依次執行：<br> 詢問一家水果店的紅富士價格流程開始<br> 走到此水果店<br> 如果此水果店沒有開門，則視此水果店的紅富士價格爲無窮大元 / 斤，並結束當前的&ldquo;詢問一家水果店的紅富士價格流程&rdquo;<br> 如果此水果店沒有蘋果，則視此水果店的紅富士價格爲無窮大元 / 斤，並結束當前的&ldquo;詢問一家水果店的紅富士價格流程&rdquo;<br> 如果此水果店的蘋果當中沒有紅富士蘋果，則視此水果店的紅富士價格爲無窮大元 / 斤，並結束當前的&ldquo;詢問一家水果店的紅富士價格流程&rdquo;<br> 如果此水果店的紅富士蘋果剩餘不到一斤，則視此水果店的紅富士價格爲無窮大元 / 斤，並結束當前的&ldquo;詢問一家水果店的紅富士價格流程&rdquo;<br> 向店主詢問此水果店的紅富士蘋果價格並記錄<br> 詢問一家水果店的紅富士價格流程結束<br> 從 3 家水果店中選出紅富士價格最低的一家（如果有並列則隨機選擇），將其作爲目標水果店<br> 如果目標水果店的紅富士蘋果價格爲無窮大元 / 斤，則結束當前的&ldquo;買蘋果流程&rdquo;<br> 走到目標水果店<br> 如果此水果店的紅富士蘋果的價格高於 10 元 / 斤，則執行 3 次：<br> 講價流程開始<br> 詢問店主是否願意將價格降到 10 元 / 斤或更低<br> 如果店主願意，則跳過剩餘的&ldquo;講價流程&rdquo;<br> 講價流程結束<br> 如果此水果店的紅富士蘋果的價格仍然高於 10 元 / 斤，則結束當前的&ldquo;買蘋果流程&rdquo;<br> 打開一個袋子，將其作爲當前的袋子<br> 重複執行以下流程，直到總重量大於一斤：<br> 裝袋一個蘋果流程開始<br> 從所有的不在袋子中的紅富士蘋果中選出最好的一個<br> 如果此蘋果能裝入當前的袋子，則將此蘋果裝入當前的袋子，否則執行：<br> 換袋子流程開始<br> 如果我有剩餘的袋子，則從中任意選出一個並作爲當前的袋子，否則執行：<br> 向店主要袋子流程開始<br> 向店主索要一個袋子<br> 如果店主拒絕給我袋子，則將我的所有袋子裏的所有蘋果取出，然後結束當前的&ldquo;買蘋果流程&rdquo;<br> 將店主給我的袋子作爲當前的袋子<br> 向店主要袋子流程結束<br> 換袋子流程結束<br> 測量我的所有袋子裏的所有蘋果的總重量<br> 裝袋一個蘋果流程結束<br> 根據我的所有袋子裏的所有蘋果的總重量和店主給出的價格，計算我應付的價格<br> 向店主詢問我應付的價格<br> 如果我不接受店主索要的價格，則執行 3 次：<br> 校對流程開始<br> 向店主解釋我計算出的價格，並詢問其是否同意<br> 如果店主同意，則跳過剩餘的&ldquo;校對流程&rdquo;<br> 校對流程結束<br> 如果我仍然不接受店主索要的價格，則將我的所有袋子裏的所有蘋果取出，然後結束當前的&ldquo;買蘋果流程&rdquo;<br> 如果我沒帶錢，則將我的所有袋子裏的所有蘋果取出，然後結束當前的&ldquo;買蘋果流程&rdquo;<br> 付錢拿走蘋果<br>買蘋果流程結束</p>
<p>現在這個流程是不是完美了呢？不是，我還能發現很多問題。</p>
<p>如果 3 家水果店都有紅富士蘋果但都不到一斤，但是三家店加起來能達到一斤，那麼我不應該結束流程回家，而是應該把三家店的紅富士蘋果都買下來。</p>
<p>如果我向水果店詢問價格的時候這家店還有紅富士蘋果，但我詢問完所有水果店的價格後這家店的紅富士蘋果賣完了，那麼我的流程會讓我試圖處理不存在的紅富士蘋果。</p>
<p>我走路的過程中可能會遇到突發事件，比如發現了新的水果店，比如袋子破掉了蘋果掉一地，對於這些情況我的流程都無法進行處理。</p>
<p>啊問題太多了我懶得再改流程了。我還是去 X 寶買吧。</p>
<p>那麼接下來我要設計一個在 X 寶買紅富士蘋果的流程&hellip;&hellip;</p>
</div>
</div>




</div>


</div>
</div>