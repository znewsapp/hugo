+++
date = "2017-01-04T20:00:00"
title = "- 這個理財的年化利率是……- 停，先說你們一年是多少天"
titleimage = "http://pic2.zhimg.com/040dd9afda640f7c8b27a232ed059885.jpg"
ga = 010420
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">爲什麼金融衍生品的計算中有時候將一年視作 360 天有時候又用 365 天來計算？</h2>

<div class="answer">



<div class="content">
<p>我認爲 day count convention 是人類歷史上最邪惡的發明，沒有之一！好端端的一個一維時間，被一羣人映射出了一個不是滿射的集合，到頭來無非就是爲了回答一個問題：兩個日期之間究竟相隔了多少個年。</p>
<p>這問題看上去弱智，但實際處理起來麻煩。因爲人類的偷懶與腦殘，在日曆上給每個月天數的時間不一樣，但是商業機構的財務週期卻是以月爲單位的，因此二月份的一天和三月份的一天的長度在定價模型裏可是不一樣的。再加考慮閏年，月末，以及各國的歷史傳統文化習俗法律規定的不同導致的市場交易時間不同，金融市場內的時間流逝是一個不均勻，非線性，非單一方向，非連續，甚至是多維的過程。相對論的時間轉換和這的複雜程度相比簡直就是小兒科。想寫點靠譜的回測？一個簡單的&rdquo;持倉至月末倒數前 3 天&rdquo;的邏輯就可以搞死你....</p>
<p>我的東家管理着 1000 多億美元的固收產品，這些產品的價格算起來自然也是一分錢都不能少，算收益率至少要精確到 0.0001%。作爲一名數據清潔工，day count convention 自然也就成了我揮之不去的噩夢。</p>
<p>你知道嗎，matlab 自帶了 12 種 day count convention 算法，而 excel 則自帶了 5 種，但這 5 種裏竟然沒有一種是和 matlab 的 12 種一樣的！微軟官方也不給任何解釋。後來我在網上翻了半天終於翻到了這 5 種中其中一種的源代碼，還被老員工表揚了半天。</p>
<p>我們有一位天才員工，某天終於受不了全球各種亂七八糟的算法，決定對它們進行歸類整理，結果一不小心竟然總結出 36 種算法！對這些算法進行總結後他竟然又歸納出了 18 種還未被使用的算法！然後他竟然還把結果寫成了一篇 30 頁的論文。此人現在已是普林斯頓的經濟學博士。我從此對他的無比佩服，因爲他不僅能&rdquo;上&rdquo;推動態規劃等高端模型，還能&rdquo;下&rdquo;來整理算日期這種無聊到極點的問題。</p>
<p>有一次我發現我們有個衍生品的定價公式巨慢，用 profiler 一測主要瓶頸竟然在 year fraction 上！也就說整個定價過程最複雜的部分是記算&rdquo;兩個日期之間究竟隔了多少年&rdquo;這個問題。如果你要算的是的是半年後的今天究竟是哪一天，哇靠恭喜你，哪怕選定了一個種 day count convention，這個答案也是不唯一的。你要是敢問今天過了 1.7 個月後是哪天，寫算法的肯定會殺了你。</p>
<p>某些弱智算法，甚至會在債券快到期時因爲週末的原因讓收益率來回波動，一興奮還以爲發現了平穩的時間序列可以套利了呢，仔細一算髮現在 price space 一分錢利潤都沒有。</p>
<p>在計算器還很貴的時候，有些算法爲了計算方便會強行把一個月當 30 天算，而這樣做的後果是在閏月的最後一天時，債券的到期時間反而會變長，也就是說時間倒流的高科技就這麼被金融人搶先發明瞭。由此還曾經誕生過一些所謂的週末套利法！</p>
<p>我真的希望哪一天，人類的科技足夠發達了，把太陽降降溫，然後把地球推到太陽附近，讓它正好每 100 天繞一圈，分成 10 個月，每個月 10 天。每週大家休息三天，取消所有特殊節假日，包括英國皇室不定期慶祝生日同時還順手把市場關了導致我們的算法出錯的這種反人類節日，讓算 year frac 迴歸到算減法的正軌上來。</p>
</div>
</div>




</div>


</div>
</div>