+++
date = "2017-01-11T07:00:00"
title = "用生日做密碼，真的是給破解者的一道送分題"
titleimage = "http://pic4.zhimg.com/b3f63f8e3183a9a29ae1847df4eacb27.jpg"
ga = 011107
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">「生日攻擊」是什麼？</h2>

<div class="answer">



<div class="content">
<p>題主所說的生日攻擊是一個密碼學的術語，廣泛用於計算機領域，它來自於概率統計中的生日問題。</p>
<img class="content-image" src="http://pic1.zhimg.com/70/v2-5f665b726a15bc839fc5423a3564f890_b.jpg" alt="">
<p>要通俗的理解生日攻擊，我們可以先來看一下什麼是生日問題：</p>
<p>生日問題：在 n 個人中隨機選取 k 個人，當 k 爲多大時能保證 k 個人中一定有兩個人的生日是相同的？</p>
<img class="content-image" src="http://pic4.zhimg.com/70/v2-8ffdf535bbb2752e15122e1d9165a767_b.jpg" alt="">
<p>你可能會說答案是 366，因爲一年有 365 天（除去閏年），根據鴿籠原理（pigeonholeprinciple)，如果有 366 個人，那麼其中兩個人必定會在同一天過生日。</p>
<p>但其實，用統計學的方法來考慮生日問題之後，我們會驚訝地發現，所需要的人數 k 遠小於 366。</p>
<p>只要 k=70，隨機選取 70 個人，這其中兩個人有相同生日的可能性就是 99.9%，可能性已經非常大了！在 k=100 時，小於 366 的三分之一，這個概率能達到 99.99997%；而在 k=200 時，可能性已經是 99.9999999999999999999999999998%了！啊！多麼的！吃驚！（數據來自 wikipedia）</p>
<p>那麼是怎麼得到這個結果的呢？</p>
<p>假設至少有兩個人同一天生日的概率爲 P，</p>
<p>那麼 P 的否定（我們寫做 1-P）就是沒有任何兩個人在同一天過生日的概率。</p>
<p>假設我們有 k 個人，</p>
<p>那麼這 k 個人中沒有任何兩個人在同一天過生日的概率就是：</p>
<img class="content-image" src="http://pic3.zhimg.com/70/v2-37c6621361764944ee227ac38b153b4a_b.jpg" alt="">
<p>最後解出來，當 k=70 的時候，P=99.9%</p>
<p>這就是生日問題。</p>
<p>那麼會到題主所問的生日攻擊，我們來看一個計算機領域中經常用到的東西：Hashfunctions（中文好像是散列算法 / 哈希算法我也不清楚）簡而言之就是用來把一樣東西經過特定運算轉換成另一樣東西，輸出的結果類型一定是相同的，更加嚴謹一點，長度也是相同的。這有點像密碼，把你要傳遞的信息通過一些辦法變成密碼，無論信息是多是少，最後得到的密文一定是同一種類型的。</p>
<p>比如 fnx=x 就是一個 hashfunction，但是它沒什麼用，因爲給它什麼它還是照原樣吐出來。</p>
<p>更高級的 hashfunction 有比如 java 中給字符串加密用的迭代方程</p>
<img class="content-image" src="http://pic4.zhimg.com/70/v2-c752c0a839b9c562b0a689e403a3f4c3_b.jpg" alt="">
<p>（我隨便編的數字）得到一個連它媽媽都不認識它的一個數字。</p>
<p>一個 hashfunction 的好壞，就在於它是否能夠使輸出的值儘量分散，減少輸出值的碰撞(collision)，這樣就能避免兩樣東西得到同樣的輸出，比如 fnx=0 就是一個非常不好的 hashfunction，因爲所有東西都被輸出成了 0；</p>
<p>在安全性方面，hashfunction 必須做到夠複雜，讓人不能夠通過簡單的幾組輸入輸出結果猜出來這個 hashfunction 用的是什麼樣的算法，比如給你 f(2)=4,f(3)=6,f(17361)=34722，是不是很容易猜出這個 f 是什麼？</p>
<img class="content-image" src="http://pic2.zhimg.com/70/v2-ada3793302b3ba7a2dc2027862e0922d_b.jpg" alt="">
<p>說了這麼多，其實生日攻擊就是寫出好的 hashfunction 最大的絆腳石。如果你把 hashfunction 的每個輸入值想成是 n 個人中的一個，再把輸出值想成是每個人的生日，那麼生日問題就告訴我們，只需要很少的輸入值，就會有很大的可能性有至少兩個輸出值完全相同，也就違反了 hashfunction 的條件之一。</p>
<p>這就是生日攻擊。</p>
<p>（注意這裏並不是給定一個輸出值和輸入值尋找另一個能夠得到相同輸出值的輸入值所需的次數，而是隨意嘗試幾個輸入值，能在其中得到相同輸出值的總次數。）</p>
<p>再深入一點的話，可以把 hashfunction 看作是一種 mapping（投影？）輸入值就是定義域，輸出是值域。注意 hashfunction 不一定是一一映射(1-to-1)的，因爲定義域和值域的大小不一定相同。大多數情況，爲了得到更高的效率和可操作性，hashfunction 的值域都會遠小於定義域。在這樣的值域當中，碰撞就是必然的。可以想象成把復活節的彩蛋放進籃子裏，各式各樣的彩蛋只能放進 5 個有編號的不同籃子裏，必定有多個彩蛋在同一個籃子裏。這裏彩蛋是定義域，籃子是值域。</p>
<p>生日攻擊能夠奏效就是因爲這個值域太小，像我們的生日問題中值域只有 365，所以只要 70 個人就能夠找到相同生日的兩個人。</p>
<p>題主還可以瞭解一下一些類似的有趣問題，比如 Monty-HallProblem 之類的:)</p>
<p>另外感謝@HT.zou 和@八里土人的評論！;D</p>
</div>
</div>




</div>


</div>
</div>