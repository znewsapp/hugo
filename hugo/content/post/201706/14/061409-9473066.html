+++
date = "2017-06-14T09:00:00"
title = "她：我沒生氣求問 AI：她現在生沒生氣？"
titleimage = "https://pic3.zhimg.com/v2-f1e5f18267319cf47d4b3d3baa46ae72.jpg"
ga = 061409
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title"></h2>

<div class="answer">

<div class="content">
<p>來自機構帳號：<a href="https://www.zhihu.com/org/zhu-jian-zhi-neng-emotibot">竹間智能 Emotibot</a></p>
</div>
</div>


</div>





<div class="question">
<h2 class="question-title">聊天中的情感分析有多難？</h2>

<div class="answer">



<div class="content">
<p>聊天不同於陳述！這背後涉及到一個本質的區別&mdash;&mdash;&ldquo;是否有交互&rdquo;。一旦涉及到交互，<strong>情感分析</strong>（sentiment analysis）評判標準的複雜度就要上升不止一個數量級了。現有回答都說的是陳述性文本的情感分析。</p>
<p>&ldquo;<strong>Affective Computing</strong>&rdquo;（情感計算）和&nbsp;<strong>NLU&nbsp;</strong>是 AI 領域重要的研究方向，而其中針對中文的情感、情緒識別與理解，竹間智能已經做了許多研究與探索，希望幫助 AI 在語義理解的基礎上更進一步，實現真正的人機情感交互。此次我們邀請 <strong><em>竹間智能高級算法工程師</em></strong><strong><em>鄧霖</em></strong> ，來深入地分享一些在中文情感、情緒識別上的經驗，並從技術，商業，人文等多個角度談談如何在對話中判斷和利用情感，以及情感判斷的重要意義。希望對大家有所幫助。</p>
<p>本文行文結構如下，共分爲三個部分：</p>
<blockquote><strong>一、</strong> <strong>無交互的情感分析，其普遍的技術實現方式及商業應用</strong> <strong>二、</strong> <strong>交互式情感分析的難處和解決思路</strong> <strong>三、</strong> <strong>情感在人類信息溝通中的意義和作用，以及如何應用</strong></blockquote>
<p><strong><strong>一、無交互的情感分析，其普遍的技術實現方式及商業應用</strong></strong></p>
<p><strong>1.</strong><strong>無交互文本情感分析的普遍技術實現方式</strong></p>
<p><strong>情感分析</strong>（sentiment analysis）又稱傾向性分析，意見抽取（Opinion extraction），情感挖掘（Sentiment mining），主觀分析（Subjectivity analysis）等，是對帶有情感色彩的主觀性文本進行分析、處理、歸納和推理的過程。</p>
<p>目前，情感分析在傳統機器學習上的主要研究方法還是基於一些傳統算法，例如，SVM、信息熵、CRF 等。基於機器學習的情感分析，其優勢在於<strong>具有對多種特徵建模的能力</strong>。要用人工標註的單個詞作爲特徵，而語料的不足往往就是性能的瓶頸。</p>
<p>當然也有基於<strong>情感詞典</strong>的情感分析方法，也就是應用情感詞典中記錄的詞語或短語的情感傾向程度和強度信息對文本進行情感分類。這個就比較依賴於人工構建和抽取的特徵了。會受到情感詞典本身的質量以及適用領域的侷限，否定詞也是一個小坑。（構建情感詞典一般採用 bootstrapping 的方法）</p>
<p>至於深度學習在情感分析上的種類就比較多了，有各種方法的綜合創新，比如有利用 LSTM 結合句法分析樹，還有基於卷積神經網絡和支持向量機的。除了準確率能有明顯的提高外，重要的是可以自動從無標註的文本中學習文本中的隱藏特徵，並可以實現端到端的分類。</p>
<p>這些技術也並不獨立，往往都是混合使用，以此來取長補短，從而達到一種相對均衡的效果。</p>
<p><strong>2.</strong><strong>無交互的文本情感分析的商業應用</strong></p>
<ul>
<li><strong>情感分析最大的應用層在於評論的篩選和歸類</strong>，之所以這個應用最廣泛，就是因爲第一這個應用離商業價值很近，第二不需要做到特別深，很多時候只要做到正負分類就能產生可見的收益了。比如對於一個餐廳來說，能夠做到把關於自己的相關好評自動抽取並在自己的網站輪播也許就夠了。</li>
</ul>
<p>電商平臺裏關於商品評論的標籤提取也可以說是情感分析。</p>
<p>關於評論的情感分析，再做深一點就是意見挖掘，這就涉及到<strong>關聯規則</strong>了。也就是做得更細，能看到用戶到底是對產品的哪個屬性滿意或者不滿，比如我覺得這件衣服有色差或者材質不夠好等。</p>
<p>再做好點就是能把情感的強度表示出來（強正面，弱正面，中性，弱負面，強負面），以及增加情感的分類。</p>
<p>也可以反向思考，利用情感分析評論，做用戶的分類聚類。</p>
<ul>
<li><strong>還有一個應用是預測社交網絡上的輿論走向</strong>。美國大選那段時間，情感分析發揮了至關重要的預測作用，通過利用 Twitter 上的大量文本進行分析，來預測整體的輿論走向。這也是在傳統調查都顯示特朗普會輸的時候他卻表現得穩如泰山的原因。</li>
</ul>
<p>這方面自己做得好玩的話，可以爬爬社交網站中熱門事件的回答和評論，然後分析分析輿論的走向，說不定就成了一個 PR 的專業分析產品了呢。還可以看看有多少輿論問題是從網站中炒起來的，企業還是相當在乎相關輿論的走向的，畢竟輿論錯位導致的用戶認知改變不是隨便砸錢就能扳回來的。所以要是實現了高準確率的預測，對於企業來說，或許可以一定程度上做到防患於未然。</p>
<ul>
<li>以上這些都算相對直接的應用。<strong>其實間接性的話，情感分析的偏向性判斷對於構建較深層的個性化推薦系統有着比較大的幫助</strong>，能較好地理解對於不同種類商品以及不同屬性的偏好程度，從而具備一定的符號推理能力，相對於目前無論是按 item CF、user CF 還是隱語音模型方式的推薦系統都更具有可解釋性與理解力。</li>
</ul>
<p>當一點點逐步知道了偏好傾向性後，其實關於用戶的精準建模也就慢慢清晰了，從多個偏好中還能進行進一步的挖掘來推理用戶屬性。一個深刻的用戶模型能產生的商業價值是不言而喻的。當然關於用戶的建模目前的研究也不多，基本是個藍海，我們正在嘗試去實現，從文本中不斷收集用戶的偏好、屬性等，再進行進一步的挖掘和推導。這邊先不展開了，以後會有文章展開細說的。</p>
<p><strong><strong>二、交互式的文本情感分析</strong></strong></p>
<p><strong>上面說的其實都是&ldquo;0 交互的情感分析&rdquo;任務。</strong></p>
<p>都是以<strong>單人敘述的方式，</strong>可能是短句子也可能是一段話，都有一個核心共同點&mdash;&mdash;&ldquo;<strong>沒有交互</strong>&rdquo;。</p>
<p>所以相對而言比較容易，只要按無交互的敘述方式做解決方案就好：就像分析微博一樣，去判斷這些短文本就行了，然後再增加一個持續的情緒疊加和衰減的函數就可以了。</p>
<p>不過似乎這樣做下去能夠帶來的價值還遠遠不夠。</p>
<p>這裏要明確幾個問題：</p>
<ul>
<li>情感在人類信息交互時的作用是什麼？</li>
<li>知道了情感狀態後能幹什麼？</li>
<li>怎麼最大化地利用這些信息創造價值？</li>
</ul>
<p>一直相信一句話&mdash;&mdash;&ldquo;問題比答案重要&rdquo;，知道問題是第一步，尤其是在不確定性這麼高的時代下。</p>
<p>這三個問題其實需要站在更高的層面去思考，也就是<strong>首先要從情感在人類信息溝通中的意義開始思考，再推理出怎麼應用，以及怎麼更高效率地運用。</strong>這些問題稍後來探討，<strong>我們先來看看有了交互後的情感分析會有什麼變化？</strong></p>
<p><strong>爲什麼一旦有了&ldquo;交互&rdquo;，情感分析就變得那麼難？</strong></p>
<p><strong>第一：交互是一個持續的過程而不是短時固定的。而這從本質上改變了情感判斷的評價方式。</strong>在無交互的時候，比如商品評論，你判斷這段話是什麼情感分類後就可以實現價值了，是清晰的分類任務。但用在對話上就不太一樣了，情感狀態持續在變，分析任何單一的一句話是沒有很大意義的，這不再是一個簡單的分類任務了。對於持續的過程，簡單的解決方案是加一個增益和衰減的函數，但這個函數怎麼寫？理論依據是什麼？怎麼判斷這個函數寫得好不好？難道靠人工標註的數據去分析麼。</p>
<p><strong>第二：交互的存在將大部分的狀態信息都隱藏了起來。</strong>在明面上能看到的不到 5%，只是冰山一角（用類似於隱馬爾可夫的方式去理解）。並且交互的雙方都默認對方知道很多信息。比如溝通主客體之間的關係狀態、彼此的需求目的、情緒狀態、社會關係、環境、之前聊到的內容，以及都具備的常識，性格，三觀等等。</p>
<p>然後你會發現以下一些現象：</p>
<ul>
<li>兩個人之間共同的信息越多就越難，因爲隱藏狀態的作用越大，隱藏狀態的維度越多。</li>
<li>不同的人之間存在着不同的交流範式。</li>
</ul>
<p>這個範式的變化取決於其他的各種環境信息（包括時間，地點，你們的關係狀態，彼此的情緒，共同的經歷，自己的聊天習慣等等）。</p>
<p>即便是相同的人，他們之間的交流範式也是一個動態變化的過程，這個想必大家深有體會，比如兩個人在戀愛的過程中，他們之間的交流方式會因爲感情的升溫和降溫而有所不同。</p>
<p>回想幾個生活中實際的經歷：</p>
<ul>
<li>找到一個微信對話，回想一下，在具體聊天的時候是不是都涉及到了這些隱藏的狀態和不同的範式。</li>
<li>當你在和你覺得重要的人聊天的時候，是不是非常關心對方的情感狀態，而且需要推理這個狀態。</li>
</ul>
<p><strong>第三：交互涉及到信息的跳躍。</strong>當你自己一個人說什麼的時候往往都是比較有邏輯的，連貫的。但聊天和個人陳述完全是兩件事，聊天會有較大的跳躍性。這種不確定的信息跳躍性指數級地增大了情感分析的難度。</p>
<p>這就是爲什麼加入了交互因素情感分析變得這麼難判斷的原因，首先是評價方式改變了，而且這個評價方式很複雜，沒有什麼可借鑑的。再從第二第三原因可以看到，這對於機器學習來說數據維度太稀疏了（顯性的狀態就只有文本，表情等，多數狀態都是隱藏的），再加上跳躍性，因此這種靠統計的方式，想把準確率做高，其困難程度可想而知。</p>
<p><strong>因此要想突破瓶頸，就需要在這三個問題上找解決方案。</strong></p>
<p>舉個例子，<strong>第一個問題，我們目前的評價方式的理論依據是心理學和認知科學的理論，當然這個還在探索。第二個問題，既然是缺，那就補，想辦法找到更多數據輸入進來，多維度（圖片，表情，顏文字等）的語義理解是一個思路，即多模態分析的思路。</strong>第三個問題，暫時屬於好像沒頭緒的狀態，結合知識圖譜和符號規則，這是一件看似簡單卻無比困難的事情，可能會有各種阻礙。</p>
<p>下面我<strong>簡述一下目前關於第二、三個問題稍細緻點的解決方案。</strong></p>
<p><strong>提到問題的解決方案，</strong>會比較自然地想到通過 LSTM 來解決上下文記憶問題，只是效果不太好，原因第一是大部分隱藏狀態不出現在文本里，第二是交互對話信息的跳躍，這導致 LSTM 的記憶其實作用不是太大。但相比其他方法確實 LSTM 在對話中的效果是有顯著提升的。</p>
<p>比較新的方式是：<strong>Seq2Seq 模型上加情感向量</strong>，將情感狀態放入 LSTM 再加入情感詞加權生成回覆。</p>
<p>進一步的話，可以利用 NLU 語義理解，從文本中抽取重要的實體和意圖，作爲特徵加入到學習中，並且加上一套規則，結合用戶的建模模型後再輸出最後的對話語句。</p>
<p>繼續深入的話，<strong>其實就是找到隱藏的信息狀態並加入到計算中，也就是多模態，內部的多模態設計，emoji+ 照片 + 表情包 + 文本長度等等，外部的多模態就是加入了識別的面部表情 + 給我提供的標籤（比如性格，星座，愛好，年齡，性別等等）+ 語音等等。利用這些信息的規則其實也相當重要，更多的靠的是對人性的理解。</strong></p>
<p><strong><strong>三、情感在人類信息溝通中的意義</strong></strong></p>
<p>上一部分講到了交互式的情感分析的困難。那既然那麼困難，爲什麼還要做？</p>
<p>答案是：因爲這很重要。</p>
<p>人類進化的歷史本質就是通信的進化歷史。而情感在信息溝通中扮演着至關重要的角色。理解情感對於人類個體和人類社會的意義，才能做出懂人的產品。</p>
<ul>
<li><strong>情感本身是高級智能的一部分</strong></li>
</ul>
<p>情感是大腦運行資源的調配者，不同的情感狀態下大腦的計算資源分配方式差距巨大，因此會採取完全不同的思維執行路徑。</p>
<p>情感對於人們的智力、理性決策、社交、感知、記憶和學習以及創造都有很重要的作用。</p>
<ul>
<li><strong>情感是交互的核心</strong></li>
</ul>
<p>想必大家應該聽過這句話&ldquo;人類交流中 80% 的信息都是情感性的信息&rdquo;，雖然不一定足夠嚴謹，但自行體會生活點滴也會發現，情感是交互的核心。</p>
<p>對於個體的來說，我們在交流中表達情感，很重要的一個作用就是通過情感告知對方我現在的狀態，一方面給出對於之前交互的狀態反饋，另一方面讓對方能推斷出我接下來行動的傾向性。</p>
<p><strong>爲什麼不是內容而是情感，能傳遞最多的狀態信息？</strong></p>
<p>因爲從認知科學的角度來看，上面說過情感就是智能的一部分，情感就是大腦運行資源的調配者，不同的情感狀態下大腦的計算資源分配方式差距巨大，因此會採取完全不同的思維執行路徑，從而產出最後不同的結果。就像在和朋友對話的時候，如果語氣語調有了明顯變化，大腦就會迅速運轉來做出各種判斷，從而相應地改變自己的行爲。千萬年的進化使得我們判斷的準確性很高，不斷的正向反饋也使得我們越來越依賴用識別對方情感的方法來判斷行爲傾向這個方式，而且已經成爲自動運行的認知方式了。這就是爲什麼接近 80% 的信息都是情感信息的原因了，因爲信息量高，極大地增加了溝通效率。</p>
<p><strong>溝通效率提升的結果就是&mdash;&mdash;增加了羣體之間協作的廣度（協作者的數量）和深度（協作內容的複雜性）。羣體智能得到了指數級的提升。</strong></p>
<p>在&ldquo;我現在的狀態&rdquo;中&ldquo;情感狀態&rdquo;是信息量最大的狀態，通過這個我們可以做兩件事，第一是預測接下來對方的行爲傾向，第二就是可以結合狀態來改變反推別人想了些什麼以及別人需要什麼。</p>
<ul>
<li><strong>人類在交互中的情感帶寬</strong></li>
</ul>
<p>先提一個概念&mdash;&mdash;&ldquo;<strong>情感帶寬</strong>&rdquo;，即你能表達的情感的信息量的大小和維度，比如說情感性的信息，往往是從多維度表達出來的，（口語：語音語調，語速，聲音大小；身體語言：面部表情，手勢，其他身體動作）等等，舉例如&ldquo;最是那一眼的溫柔&rdquo;&ldquo;眉目傳情&rdquo;&ldquo;沉悶的乾咳&rdquo;等等。</p>
<p><strong>到了網絡，整個範式就發生了比較大的變化，情感的帶寬也變了。</strong>比如在網絡上交流溝通，我們的情感帶寬好像瞬間驟降了，需要以文本和圖片的方式來表達。</p>
<p><strong>實際上在降低的同時，我們的情感帶寬在某種程度上也增加了，增加了幾個新的輸出維度，</strong>比如 emoji 表情、各種表情包、gif 圖，回話的時間快慢，正在輸入的狀態，甚至像 Faceu 那樣的個人表情包等等都是不斷豐富我們情感帶寬的方式。</p>
<p>社交網絡上的聊天，文字對話佔據了大部分，但實際上我們看到文字的時候其實是在大腦裏虛擬者那個人在說的，會自行腦補 Ta 這麼說的時候的語氣和表情等等。</p>
<p>文字文本依然是佔據大部分的，而其他維度信息的縮減其結果就是&mdash;&mdash;通過語義來推斷情感。</p>
<p>前面講到對話中情感分析的困難，其中一個重要原因就是因爲信息維度的稀疏，因此要儘可能從多維度把缺失的情感帶寬給補上。</p>
<p>解決方案上面也說過了，<strong>多模態，內部的多模態設計 emoji+ 照片 + 表情包 + 文本長度等等，外部的多模態就是加入了識別的面部表情 + 給我提供的標籤（比如性格，星座，愛好，年齡，性別等等）+ 語音等等。利用這些信息的規則其實也相當重要，更多的靠的是對人性的理解。</strong></p>
<p><strong><strong>總結</strong></strong></p>
<p>以上講到了情感識別在交互中至關重要的作用。</p>
<p><strong>對於整個情感交互來說，情感識別可以說是技術基礎，在識別之後可以做更深入的事情，&ldquo;情感表達&rdquo;、&ldquo;需求分析&rdquo;、&ldquo;深度用戶建模&rdquo;&ldquo;人性化交互體驗&rdquo;等等。</strong></p>
<p>拿深度建模來說，通過和你聊天，就可以用情感分析對實體進行高效率的自動化標註，實現專屬情感詞典。瞭解到你的偏好以及你的偏好程度，利用你的偏好給你建模，久而久之就實現了個性化，而不是像 Siri 那種號稱個人助手實際上卻不夠個性化的存在。</p>
<p>對情感表達來說，可以實現人機對話系統中情感的誘導，判斷出情感之後自然就可以去影響情緒了，用不同的話語來實現情感傾向的改變。比如我能判斷我接下來說選哪一句答覆能讓你產生一個情感傾向，可能是高興、驚訝也可能是傷心等等。讓你產生感受這就是進一步在實現交互。</p>
<p>人性化交互體驗的應用方向是不言自明的，當智能體的&ldquo;智商&rdquo;沒有過於顯著的差別的時候，一個稍微有些情商的智能系統更容易被選擇。拿家用機器人來說，核心的需求其實是陪護和娛樂，而要做好這兩件事&ldquo;情商&rdquo;是關鍵。上面也說過情感是信息交互中最重要的反饋，因爲信息量最大。因此一個不能很好地理解人類情感和意圖的機器是做不好交互的。當然要實現這個需要的是一整套的情感系統。</p>
<hr>
<p><em>本回答來自竹間智能高級算法工程師鄧霖。</em></p>
</div>
</div>




</div>





<div class="question">
<h2 class="question-title"></h2>

<div class="answer">

<div class="content">
<p>「知乎機構帳號」是機構用戶專用的知乎帳號，與知乎社區內原有的個人帳號獨立並行，其使用者爲有正規資質的組織機構，包括但不限於科研院所、公益組織、政府機關、媒體、企業等。這不僅是知乎對機構的「身份認證」，更是涵蓋了內容流通機制、帳號規範等全套帳號體系。和個人帳號一樣，機構帳號開通不需要任何費用，同時也受社區規範的監督管理，並要遵守相關協議。目前機構帳號入駐採用邀請制。您可以通過<span class="s1">&nbsp;&nbsp;<a href="http://zhihu.com/org-intro"><span class="s2">什麼是「知乎機構帳號」</span></a>&nbsp;</span>來了解更多機構帳號信息。</p>
</div>
</div>


</div>


</div>
</div>