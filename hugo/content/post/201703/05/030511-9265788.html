+++
date = "2017-03-05T11:00:00"
title = "遊戲裏的「視野」順滑地展開，實現起來簡單粗暴"
titleimage = "http://pic2.zhimg.com/08b5ea6275e2c443cfb19fc1dc3a1569.jpg"
ga = 030511
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">平滑的戰爭迷霧效果是如何實現的？</h2>

<div class="answer">



<div class="content">
<p>所以說做遊戲思維要靈活，不要死心眼。</p>
<p>別看 WC3、SC2 是 3D 遊戲，本質邏輯和 SC 一樣，視野還是按<strong>格子</strong>計算的。單位移動只要不出當前格子，迷霧就不會發生任何變化；移動到下一個格子的時候，迷霧會跟着多打開一格。換言之，迷霧覆蓋也好、消散也好，依然是按整格尺寸變化的，和 SC 是相同的機制。</p>
<p>那麼爲什麼 SC 裏用單位探路時，迷霧是一塊一塊打開的，顯得有些僵硬；WC3 和 SC2 卻是流暢平滑、連續推進的呢？</p>
<p>雖然沒有確切證據，但我有九成把握認爲，它們只是加了一個速度適中的<strong>漸變動畫效果</strong>而已。需要消除 / 添加陰影時，不去瞬間切換遮罩物透明度，而是觸發一個漸變過程，使玩家產生錯覺。</p>
<p>反正如果是我來開發，我就這麼實現。簡單粗暴。</p>
<p>順手做了個測試，讓單位每次挪一小步停下，截圖，效果如下：</p>
<img class="content-image" src="http://pic4.zhimg.com/70/v2-4280ee3b22080e725442ab0b59b8363b_b.jpg" alt="">
<img class="content-image" src="http://pic2.zhimg.com/70/v2-a78788d3be8854b549e5f0f64cdbd4ad_b.jpg" alt="">
<img class="content-image" src="http://pic1.zhimg.com/70/v2-d43bfb5346ac67d27def936d515139ac_b.jpg" alt="">
<img class="content-image" src="http://pic1.zhimg.com/70/v2-92490086c45e1a1989f1094acf1ca46c_b.jpg" alt="">
<p>圖 1，請注意農民和鐵匠鋪的相對位置。</p>
<p>圖 2，農民向右走了一步，但還在同一個格子裏，迷霧毫無反應。</p>
<p>圖 3，農民繼續向右行走，跨越中線進入下一格，視野隨之「平滑」打開。陰影退散過程約 1 秒，結束時變成圖中所示情形。</p>
<p>圖 4，農民繼續向右行走，但沒有進入再下一格，因此視野保持不變。</p>
<p>* 注：造建築物時顯示的網格是 64&times;64 單位，而地圖實際的格子是 128&times;128 單位，邊長是兩倍。例如鐵匠鋪看起來是 4&times;4 格建築，其實是 2&times;2 格建築。上面圖中的農民只走了大約兩格長度。</p>
<p>實際遊戲中玩家顯然不會這麼一步一挪地操作，都是大步流星。正常單位的移動速度有 200~350，探路時開圖的動畫完全可以連貫起來，讓你感覺彷彿迷霧被平滑驅散一般。<strong>如果你用一個移動速度特別慢的單位（例如 NE 的建築）做測試，就可以明顯看到視野是一坨一坨點亮的。</strong></p>
<p>所以說做遊戲思維要靈活，不要死心眼。障眼法多得是，不管黑貓白貓，能糊弄住玩家就是好貓。</p>
<p>評論區有位同志問，<strong>如果單位走得太快，迷霧漸變還沒結束就走過去了怎麼辦？</strong></p>
<p>有人猜迷霧動畫速度和單位移動速度掛鉤，錯。</p>
<p>有人猜迷霧動畫速度和單位距離掛鉤，想法很好，但遊戲中不是這樣的。</p>
<p><strong>正確答案是：單位會走到迷霧裏，從玩家屏幕上消失，哪怕是自己的單位。</strong>暴雪壓根就沒想對這種極端情況特殊處理，使單位保持可見，反正正常遊戲中的單位視野基本都是 600 以上，移動速度上限是 522，一般足夠了。它才懶得管你用地圖編輯器弄個跑得賊快的瞎子怎麼辦。</p>
</div>
</div>




</div>


</div>
</div>