+++
date = "2017-07-04T11:00:00"
title = "料到你們會直接拔走 U 盤，電腦提前做好了防備"
titleimage = "https://pic4.zhimg.com/v2-048aa5a927e0ef3ddb1a756e4f3a775f.jpg"
ga = 070411
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">



<div class="question">
<h2 class="question-title">爲什麼 U 盤不安全移除也不會丟失文件？</h2>
<div class="answer">



<div class="content">
<p>我們經常會被微軟教育：拔出 U 盤前一定要安全移除:</p>
<img class="content-image" src="http://pic2.zhimg.com/v2-6426775e0f4db308addb9b34a26129b9_b.jpg" alt="">
<p>作爲一個程序員，我也很理解這點。因爲如果文件操作都立刻進行，效率非常低，尤其對於大量小文件而言更是如此。操作系統的文件子系統有個 buffer，將數據暫時存儲起來，在方便的時刻再一次寫入設備。這個安全移除就是最後一個&ldquo;方便的時刻&rdquo;。</p>
<p>不過，不知道你有沒有發現，現在大部分人都是用完直接拔掉，也很少聽說文件丟失，這是爲什麼呢?</p>
<p><strong><strong>原因</strong></strong></p>
<p>其實微軟做過調查發現要求用戶每次點擊鼠標好幾次並不是個很好的辦法，很少有用戶喜歡這麼做。它改變了原先的做法，會盡量在用戶操作完成後立刻刷新 buffer。這樣數據安全了，那麼會不會造成磁盤存取效能下降呢? 其實操作系統會判斷存儲媒介的種類，只有外部可移動設備會被設置這種策略。通過哪裏能觀察到這種策略呢？我們可以在設備管理器中看到：</p>
<img class="content-image" src="http://pic2.zhimg.com/v2-07b405d3532e8a02e933f8a35ebebbe9_b.jpg" alt="">
<p>移動設備都默認被設置爲可以快速刪除，寫緩存被禁用了。帶來的好處是可以不用安全移除了！如果你需要更好的性能，可以選擇下面那個&ldquo;更好的性能&rdquo;選項。如果是本地硬盤，則默認開關完全不同：</p>
<img class="content-image" src="http://pic2.zhimg.com/v2-f2f30162ae84c1d96b7e817a8ec116e5_b.jpg" alt="">
<p><strong><strong>結論</strong></strong></p>
<p>微軟在不停的改進 windows 的使用體驗。這個巨大的進步卻沒有廣爲人知，可能是顧及到可能的數據丟失。不過據我體驗，在文件操作完畢後，等個一兩秒鐘，立刻拔出 U 盤，沒有出現過任何問題。</p>
<hr>
<p>歡迎關注微信公衆號：UEFIBlog</p>



</div>
</div>
</div>


</div>
</div>