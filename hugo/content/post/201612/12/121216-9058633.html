+++
date = "2016-12-12T16:00:00"
title = "把 CPU 主頻降低一點，再低一點，會發生什麼？"
titleimage = "http://pic3.zhimg.com/d1f98680dccc2c7389ca7c7ebe09776e.jpg"
ga = 121216
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">將 CPU 主頻性能降到極低還能正常運行各種操作系統麼？如果不能，會有哪些問題？</h2>

<div class="answer">



<div class="content">
<p>樓主很有想法。</p>
<p>如果我們將所有的計算單元，輸入輸出，存儲單元，授時看做<strong>一個封閉的系統，除此之外不接受任何外部信息</strong>（比如真實世界的時間、網絡數據等等），然後把這個系統按照一個固定的倍數 X 放慢，那麼這個系統是可以完全復現真實世界的軟件運行的，只不過它的復現速度只有真實世界的 1/X 而已。</p>
<p>在現實的硬件製造中大家也會有這麼一套系統。</p>
<p>在 CPU 的電路設計好後，很大一部分的工作量就是驗證數字電路的正確性。這個時候還沒有真正的 CPU，他們會將電路構建在一個巨大的 FPGA 上（構建在軟件上也行，但是速度實在太慢）。這個 FPGA 上的 CPU 運行在一個較低的頻率，比如 30MHz。如果我們的設計目標是每秒鐘 3GHz，我們可以得出這個 FPGA 的 CPU 加速比是 0.01。然後將系統時鐘，IO（例如磁盤和網絡）等等做同比例放慢（也就是大家的速度都是設計速度的 1/100），就可以以相當的精度模擬出正常運行時的情況了。</p>
<p>當然因爲一些誤差因素，做到 100%還是很艱難的。比如，實際中 Disk 會出現未知的傳輸錯誤，模型也可能存在精準性問題，現實中 CPU 也會受到溫度影響導致頻率變化。這些都是模擬中難以預測的因素。</p>
<p>但是起碼在大的邏輯上來說，放慢整個系統的速度並沒有任何問題。</p>
<p>注意，我這裏一再強調的是&ldquo;<strong>整個封閉系統</strong>&rdquo;一起放慢。如果不一起放慢會有很多潛在問題。考慮 CPU 只有 1/100 的速度，但是授時系統（例如 Timer 和時間戳）不變。此時我們的系統有殺超時進程的習慣，因爲 CPU 變慢了太多，本來可以在預定時間內響應的應用程序假死，結果直接被系統殺了，這個時候就不能算是&ldquo;正常運行&rdquo;了。</p>
<p>不接受外部信息也有類似的理由。假設系統中存在隨機數發生器，這個發生器依據熱噪聲，或者依據現實世界的時間，那麼被放慢後，系統在採集隨機數發生器時獲得的數據會和真實世界有所不同，這些多少會影響到應用程序的行爲。</p>
</div>
</div>




</div>


</div>
</div>