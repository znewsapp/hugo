+++
date = "2016-09-05T18:00:00"
title = "別說 CPU 好像沒什麼進步，追趕英特爾的人已經在冒冷汗了"
titleimage = "http://pic4.zhimg.com/5a85e55268469f7ab48d52f72b25244f.jpg"
ga = 090518
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">如果英特爾一直以擠牙膏的方式研發 CPU，CPU 的性能是否會進入一段停滯期？</h2>

<div class="answer">



<div class="content">
<p>先講一個最近發生在我們自己身上的事。</p>
<p>背景：</p>
<p>有的同行知道，我們正在做一套與 Intel 有一定競爭關係的原型系統，Intel 在最近兩代的 Xeon CPU 裏面實現的幾個 Xeon CPU 專用的技術點，我們也實現了，目前暫時勉強處於並跑狀態（但估計很快就要被甩下了：（</p>
<p>Intel 最近把他們的實現方案和技術考慮發了一篇論文出來，同樣的一個技術，Intel 的實現在 2007 年模擬器評估的時候就做到了 0.125%的 overhead，2015 年推進實際產品裏面的量產版本比這個更低。這個技術在我們的平臺上剛好是我在負責做的，當時我看到這個公開的數字倒抽了一口冷氣，因爲單就 overhead 來說我們要落後 10-40 倍，當時算了一下我們的 overhead 大致上是 1.5%~5%左右。</p>
<p>於是很想知道 Intel 是怎麼做的。他們公開的那個 0.125% overhead 的方法，是從一篇上世紀 90 年代初的一篇 wisc-madison 的老論文裏面挖出來的，而且那篇論文與我們所說的這項技術並沒有很明顯的直接關係。如果 Intel 的人不把這個發現的價值重新評估一遍，可能它就永遠埋在故紙堆裏了。當時看到 Intel 這個實現方法的來源的時候，震驚不亞於看到 0.125%這個數字。</p>
<p>面對一個技術的需求，能夠直接挖到一篇二十多年前不太起眼的一篇不太相關的論文，然後直接開幹，可能性太小了，比較合理的推測是，他們內部試驗 / 討論了很多很多種方法，最終在這篇二十多年前的不太相關的論文裏面獲得了實現靈感，然後找到了這個 0.125%的方法。由衷佩服。</p>
<p>然後花了一個星期的時間復現了這個方法，測到了 Intel 沒有完全公開的一些數據，發現這個方法的效果比預料的還要好一些。</p>
<p>我想說的是，在我工作的 microarchitecture 這個領域裏，Intel 並不是在擠牙膏，而是一直在努力探索。只有當你成爲 Intel 的追趕者或者競爭者的時候才能感到他們的努力和強大。眼下的我僅僅是在一個學術研究機構裏面面臨一些不太直接的技術競爭罷了，都會有這種感到冒冷汗的時候，對於其他工業界的前輩和同行們來說估計壓力要直接的多，也大得多。</p>
<p>普通人感覺 Intel 進步很小，是因爲單線程性能的進步空間已經越來越小了。ILP wall 已經是寫進教科書裏的問題，《量化研究方法》的兩位超 S 級作者已經給出了未來的 CPU 不太可能再繼續激進追求 ILP 的斷言，激進追求 ILP 的上世紀 90 年代已經過去了。微結構的未來在其他地方，比如多核，比如能耗，比如異構，比如 cache &amp; memory hierarchy，等等。</p>
<p>直到目前爲止，Intel 的微結構仍然在許多地方保持領先，比如 front-end 的單線程 instruction supply 仍然領先 IBM Power8/AMD Bulldozer 及其後繼系列至少一個身位。</p>
</div>
</div>




</div>


</div>
</div>