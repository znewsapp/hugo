+++
date = "2016-09-27T10:00:00"
title = "想着簡單，但證明生成截圖的當前時間真是個技術活"
titleimage = "http://pic3.zhimg.com/ac9c9338f3bc43dec8068880be78146e.jpg"
ga = 092710
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">截圖如何證明當前時間？</h2>

<div class="answer">



<div class="content">
<p>這個問題必須分解成兩個部分：</p>
<p>1）證明在某個特定的<strong>時間點</strong>存在某圖片 A</p>
<p>2）證明這張圖 A 就是截圖</p>
<p>問題 1 非常好解決，有許多方案，但是問題 2 基本上無解，除非引入一個第三方機構如公證處、谷歌快照等等纔可以解決。</p>
<p>目前所有的答案都是在試圖解決問題 1，沒有一個答案能夠解決問題 2.</p>
<p>我們可以使用比特幣系統構造出一個存在證明，從而解決問題 1：</p>
<p>豆知識：</p>
<blockquote>比特幣系統每隔 10 分鐘會產生一個新的 block，同時產生一組比特幣，這個過程類似彩票開獎，同時會產生一個 Blockhash 值，這個值可以類比於彩票的中獎號碼，想提前猜中這個值幾乎不可能。</blockquote>
<p>首先，我們有：</p>
<img class="content-image" src="http://pic2.zhimg.com/70/a2eb9924bb8485549e26ab4c93c17b85_b.jpg" alt="">
<p>這是一張截圖，我們先將當前最新的 Blockhash 寫在圖上，查詢&nbsp;<a href="https://blockchain.info/">Bitcoin Block Explorer</a>&nbsp;得知當前最新的 Block #275848 對應的 hash 是</p>
<blockquote>0000000000000000df141a5f0b3062f680c2357ab3bbbb6261b85b3e8d93084d</blockquote>
<p>這個 Block 誕生的時間是</p>
<blockquote>2013-12-19 12:23:28 UTC</blockquote>
<img class="content-image" src="http://pic3.zhimg.com/70/ae8b2054457c3c2c0e5a022ef235b056_b.jpg" alt="">
<p><strong>此時，我們證明了這張圖不可能在 Block #275848 誕生之前準備好。也就是說，這張圖至少在 2013-12-19 12:23:28 UTC 之後才存在。</strong></p>
<img class="content-image" src="http://pic2.zhimg.com/70/da814ac5039bd5df55958e88a0184ded_b.jpg" alt="">
<p>隨後，我們求出帶有 hash 值的截圖的摘要值：</p>
<img class="content-image" src="http://pic2.zhimg.com/70/f42018151cb4935801269d84a34a746d_b.jpg" alt="">
<p>我們分別以</p>
<blockquote>ae8b2054457c3c2c0e5a022ef235b056<br>60f07d8acd9399afc35470cf399c1767b246e5b1</blockquote>
<p><strong>這兩個摘要值作爲私鑰，產生對應的比特幣地址，然後將少量比特幣匯入這兩個地址，最後再從這兩個地址將所有比特幣匯出。</strong></p>
<p>這樣，我們就完成了存在證明的第二步。這一步交易的交易時間被比特幣系統所記錄，具體時間爲：2013-12-19 12:45:37UTC</p>
<p>豆知識：</p>
<blockquote>比特幣系統中的所有交易記錄都會被所有人獲得，所有人都會知道這兩個地址被人匯入了比特幣。但是他們不能從這兩個地址反過來推算出你所使用的私鑰。</blockquote>
<p>由於目前沒有一個已知摘要值就能產生對應的圖片文件的程序，所有我們可以斷定，在交易完成之前（2013-12-19 12:45:37UTC），你就已經擁有了這張圖片。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/eaac4635e45a6d6f039de2ed3b3ce571_b.jpg" alt="">
<p>最後，我們就證明在世界標準時間 2013 年 12 月 19 日 12 點 23 分至 45 分期間，我擁有這張圖片。</p>
<p><strong>比特幣系統提供了一套穩定的時間戳系統，這是其不爲人知的貢獻。</strong></p>
<p>除了比特幣系統之外，我們還可以使用一些簡單的解決辦法，比如將你要證明存在的東西（比如你的手稿、論文）和當天的報紙一起塞進一個信封封口，然後蓋上郵戳寄給你自己。不要拆開，留做證物即可。</p>
<p>當然這個辦法容易被質疑說你郵寄了一個空白未封口的信封&hellip;&hellip;</p>
<p>另外<a href="http://www.tsa.cn/">時間戳服務中心</a>提供有時間戳服務，可以作爲法律上的證據幫助證明你的著作權。不過每個要進行證明的文件都需要收取費用。</p>
<p><strong>鐺鐺鐺鐺~這個題目其實還是有一個完美的解答的：</strong></p>
<p><a href="http://www.sh-notary.gov.cn/quzheng/">公證證據寶 - 上海市東方公證處</a></p>
<blockquote>無論網頁、電子郵件還是網聊過程等電子證據均能即時提取、安全儲存。經驗豐富的公證員將爲您提供專業的法律建議，並出具高證明力的公證文書。</blockquote>
<p>關鍵時刻，還是國家機構比較靠譜&hellip;&hellip;</p>
<p>靈感來源與版權說明：</p>
<p>本文中所述的基於比特幣系統的存在證明靈感來自<a href="http://618.io/blog/2013/08/12/timestamp-system-and-proof-of-existance/">時間戳服務與存在證明</a>，非原創，不擔保其法律效應。</p>
<p>本文所使用圖片繫個人制作，說明文字亦個人所述，如有缺漏，請儘管提出。</p>
<p>利益相關：</p>
<p>2012 年 3 月前曾購入比特幣，已全部拋售。</p>
<p>Last modified 2013/12/19 21:16 （UTC+8） 重寫全文並配圖，提供最終解決方案。</p>
</div>
</div>

<div class="answer">



<div class="content">
<p>題主的問題有兩部分，一個是證明圖片產生於某個時間點之後，一個是證明圖片產生於某個時間點之前。關於「之後」的證明另一個答案說得很好，實際上就是把那種高度隨機的，從過去不能預測的數據寫入圖片，這樣第三方就能驗證圖片產生不可能早於此時。</p>
<p>我來補充如何證明圖片某個時刻之前，換言之<strong>在某個時刻此圖片存在</strong>。</p>
<p>證明的方法也不復雜：</p>
<p>將你的文件算出 hash 併發送給可信的機構 Justin，然後，Justin 將當前的時間（時間戳）和文件 hash 一起構建一個新 hash，然後把新 hash 套上 Justin 的私鑰並和時間戳一起發回給你。這樣第三方就可以用 Justin 的公鑰來驗證文件的時效性，信譽由 Justin 保證。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/fa66d7ac376be6ace2ef76a176862301_b.jpg" alt="">
<img class="content-image" src="http://pic3.zhimg.com/70/cf6bad54c23b1dc22ce3308fab78a0e6_b.jpg" alt="">
<p>這種方法就是著名的 RFC-3161。</p>
<p>這裏補充一種如何利用 Trusted Timestamping 證明圖片生成於某個時刻之後的方法：</p>
<ol>
<li>用 <a href="http://www.random.org/bitmaps/">RANDOM.ORG</a> 生成一張隨機圖片 R，不用太大，像素夠 256 個就行，比如這樣：<img class="content-image" src="http://pic2.zhimg.com/70/1743f28b2d5a08efed1e3a7e2e7445e9_b.jpg" alt=""></li>
<li>將隨機圖 R 用 RFC-3161 方法驗證，此時 Justin 會認可此圖生成早於時刻 A。你會得到三個數據：隨機圖 R，時間戳 A 和簽名的 Hash A</li>
<li>將上面信息寫入截圖裏（假設此圖叫 P，其中包含了隨機圖 R、時間戳 A 和 Hash A），保存</li>
<li>再次用 RFC-3161 驗證整張截圖，得到時間戳 B 和簽名的 Hash B</li>
<li>好了，你的截圖的時效性已經有保證了。</li>
</ol>
</div>
</div>




</div>


</div>
</div>