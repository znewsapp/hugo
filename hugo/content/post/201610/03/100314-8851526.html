+++
date = "2016-10-03T14:00:00"
title = "一塊 CPU 上數以億計的晶體管，是這樣「刻」上去的"
titleimage = "http://pic2.zhimg.com/d34ec34a1fd65496d309c1b1c4649641.jpg"
ga = 100314
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">芯片裏面有幾千萬的晶體管是怎麼實現的？</h2>

<div class="answer">



<div class="content">
<p>看到一個自己還算了解的問題，手癢來回答。其他人提到的部分我就不說了，主要來講講究竟是怎麼刻上去的。下文中的光刻機主要指步進式和掃描式光刻機。</p>
<p>1. 首先我們知道，光刻的大致流程是，一個晶圓（wafer）（通常直徑爲 300mm）上塗一層光刻膠，然後光線經過一個已經刻有電路圖案（pattern）的掩膜版（mask or reticle）照射到晶圓上，晶圓上的光刻膠部分感光（對應有圖案的部分），接着做後續的溶解光刻膠、蝕刻晶圓等處理。然後再塗一層光刻膠，重複上述步驟幾十次，以達到所需要求；</p>
<p>2. 簡化結構請看下圖。掩膜版和晶圓各自安裝在一個運動平臺上（reticle stage and wafer stage）。光刻時，兩者運動到規定的位置，光源打開。光線通過掩膜版後，經過透鏡，該透鏡能夠將電路圖案縮小至原來的四分之一，然後投射到晶圓上，使光刻膠部分感光。</p>
<img class="content-image" style="display: block; margin-left: auto; margin-right: auto;" src="http://pic2.zhimg.com/70/c8597824e1430d39b6611e4465d310e1_b.jpg" alt="">
<p>3. 一塊晶圓上有很多 die，每一個 die 上都刻有相同的電路圖案，即一塊晶圓可以出產很多芯片。一個 die 典型的尺寸是 26&times;32mm。光刻機主要有兩種，一種叫做 stepper，即掩膜版和晶圓上的某一個 die 運動到位後，光源開、閉，完成一次光刻，然後晶圓運動使得下一個 die 到位，再進行一次光刻，依此類推。而另一種光刻機叫做 scanner，即光線被限制在一條縫的區域內，光刻時，掩膜版和晶圓同時運動，使光線以掃描的方式掃過一個 die 的區域，從而將電路圖案刻在晶圓上（見下圖(b)）。scanner 比 stepper 的優勢在於，可以提供更大的 die 的尺寸。其原因在於，對於一個固定尺寸的圓透鏡，比如直徑 32mm 的圓（指投射後的區域大小），其允許透過的光線的區域尺寸是受限的。若採用 stepper 的 step-and-expose 方式進行光刻，一個 die 的區域必須能被包含在直徑 32mm 的圓中，因此能獲得的最大的 die 的尺寸爲 22&times;22mm；若採用 scanner 的 step-and-scan 方式，透鏡能夠提供的矩形區域長度可以到 26mm（26&times;8mm）甚至更長，將光縫設置爲這個尺寸，使用掃描的方式便可以獲得 26&times;Lmm 的區域（L 爲掃描長度）。區域示意見下圖(a)。同樣的透鏡在 stepper 下可以實現更大區域的意義在於，當你需要生產尺寸較大的芯片的時候，換一個更大的透鏡的費用是昂貴的。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/6474d034accf9268cc5abcbd7b8ebc7d_b.jpg" alt="">
<p>4. Scanner 的 step-and-scan 過程的示意圖如下：</p>
<img class="content-image" style="display: block; margin-left: auto; margin-right: auto;" src="http://pic4.zhimg.com/70/ac819d41d228d25b3968a04fb19a692b_b.jpg" alt="">
<p>5. 爲了使每層的電路相互之間不發生干涉，需要對上下平臺進行精密運動控制。掃描時上下平臺應處於勻速運動階段。目前最小的層疊誤差小於 2nm（單個機器內）或 3nm（不同機器間）。</p>
<p>6. 光源的波長一般爲 365、248、193、157 甚至 13.5 nm（EUV, Extreme Ultraviolet）。因爲光刻過程受到衍射限制，光源波長越小，能夠做出的芯片尺寸就越小。</p>
<p>7. 在透鏡和晶圓之間加入折射率大於 1 的液體（如水），可以減小光線波長，從而提高 NA（數值孔徑）和分辨率。這種光刻機叫浸潤式（immersion）光刻機。</p>
<p>8. 世界上做高端光刻機的廠家主要有 ASML、Nikon 和 Canon。佳能大概已經不行了。Nikon 每年開個會叫做 LithoVision。</p>
<p>參考文獻：Butler H. Position control in lithographic equipment [applications of control][J]. Control Systems, IEEE, 2011, 31(5): 28-47.</p>
</div>
</div>

<div class="answer">



<div class="content">
<p>看到幾個答案，感覺基本已經涵蓋了一個電路從設計走到生產的每一步。但是感覺在細節上還是存在一些問題：</p>
<p>1. 當前 CPU 上的晶體管已經遠遠不是千萬級別的概念，而是數個 billion。</p>
<p>2. 2015 年時最先進的製程工藝是 Intel 公佈的 14nm 工藝，Fin Pitch 小於 50nm，可以說是技術上的一個飛躍了。關於所謂的 14nm，實際只能初略的反映工藝的一個技術節點，真正的溝道長度要比 14nm 要長一些。</p>
<p>3. 關於 14nm 之後的技術，目前理論預測的極限大概在 3nm 左右。出去開會的時候和一些工業界的大牛們有過一些學習，據說目前 10nm 已經完成了大規模生產最初階段的論證，而 7nm 也基本完成了實驗室階段的研發。感覺 5nm，甚至是 3nm 只是時間上的問題。</p>
<p>4. 關於 CPU 的生產流程，實際只包含 Intel 的工藝是不完整的。目前技術上有兩大陣營，一者是 Intel 爲首的 Bulk Si FinFET 技術，一者是 IBM 爲首的 SOI Si 技術，兩者技術各有利弊。</p>
<p>5. 關於那麼多晶體管是怎麼弄上去的，實際最本質的還是光刻技術 <a href="http://en.wikipedia.org/wiki/Photolithography">Photolithography</a>，隨着特徵尺寸的縮小，光刻的重要性已經上升到無法上升的地步了，以至於出現了 EUV <a href="http://en.wikipedia.org/wiki/Extreme_ultraviolet_lithography">Extreme ultraviolet lithography</a> 和 Multiple patterning <a href="http://en.wikipedia.org/wiki/Multiple_patterning">Multiple patterning</a> 等諸多逆天的技術，光這些技術都可以說上很多文字了。</p>
<p>5. 半導體產業毋庸置疑是近百年最爲激動人心的領域，正是這無數的晶體管一代又一代的更新變革纔有了近些年幾乎爆炸式的 IT 技術進步。</p>
<p>6. 之前很難想象那幾十億個晶體管能幾乎完全一致並且整齊劃一的工作而不出現任何錯誤，這本身就是一件非常 amazing 的事情，其實在那小小的 CPU 背後包含了無數人幾十年的心血（Intel 在美國的技術研發部門有一萬多人，其中有 8000 多 PhD，可想而知其中投入的人力物力之大），於是這個問題就不難理解了。</p>
<p>之前因爲科研需求拆過一個 CPU。</p>
<p>於是放兩張照片和大家分享。</p>
<img class="content-image" src="http://pic3.zhimg.com/70/bb4c600921190841469e159975502a26_b.jpg" alt="">
<p>這是一個 Top-down View 的 SEM 照片，可以非常清晰的看見 CPU 內部的層狀結構，越往下線寬越窄，越靠近器件層。</p>
<img class="content-image" src="http://pic4.zhimg.com/70/273bc59c5cdf548212a179354b512ef3_b.jpg" alt="">
<p>這是 CPU 的截面視圖，可以清晰的看到層狀的 CPU 結構，由上到下有大約 10 層，其中最下層爲器件層，即是 MOSFET 晶體管。</p>
<p>拆解的 CPU 是 AMD 的產品，AMD 作爲 IBM 陣營的公司，同 Intel 不同，其採用的是 SOI 襯底技術。</p>
<p>關於之前提到的 Intel 14nm 技術，在去年的國際電子器件會議上（IEDM2014），Intel 公佈了其的具體的技術細節，雖然還是有些語焉不詳，但已經能夠比較完整了解其中的一些工藝進展。</p>
<img class="content-image" src="http://pic3.zhimg.com/70/3cf11865c2eebd3cf552acd9113b9b06_b.jpg" alt="">
<p>此爲 3D FinFET 中的 Fin 結構，Fin Pitch（兩個 Fin 之間的距離）爲 40nm，這對於工藝上是很大的挑戰了，同時對於提高集成度縮小成本具有非常重要的意義。</p>
<img class="content-image" src="http://pic1.zhimg.com/70/8185d70bfc2bcc56d21f23a52230a08c_b.jpg" alt="">
<p>這是整個 CPU 某一區域的截面 TEM 圖，很明顯比我那個粗糙的 SEM 要清楚太多了。最下層同樣是晶體管。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/9951e5a23bec479d2c77cc8a6d66d6c1_b.jpg" alt="">
<p>這張圖上顯示了 Intel 最新採用的 Air Gap 技術，圖中黑色區域即是 air gap。因爲空氣的 K 值近乎最低，此舉有利於減小互聯線之間的寄生電容，減小信號 delay。</p>
<p>同時在 IEDM 2014 上 IBM 也公佈了 SOI 陣營的 14nm 技術，相比 Intel 的技術，IBM 要更加 fancy 和複雜，估計成本也要高不少。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/2f59d35f66a9060c2cad360c55fb06ed_b.jpg" alt="">
<p>和 Intel 的體硅（Bulk Si）技術不一樣，IBM 採用的是絕緣體上硅（SOI）上的 3D 晶體管。</p>
<p>關於 7nm 以後的 technology node，其實工業界也是莫衷一是，Wiki 上認爲 5nm(<a href="http://en.wikipedia.org/wiki/5_nanometer">5 nanometer</a>)將是 Moore&lsquo;s Law 的盡頭，但 Intel 也有大牛表示 FinFET 技術可以把 Moore&rsquo;s Law 推展至 3nm（<a href="http://www.eetimes.com/document.asp?doc_id=1319330">Moore's Law Dead by 2022, Expert Says</a>， <a href="http://www.extremetech.com/computing/162376-7nm-5nm-3nm-the-new-materials-and-transistors-that-will-take-us-to-the-limits-of-moores-law">7nm, 5nm, 3nm: The new materials and transistors that will take us to the limits of Moore&rsquo;s law</a>）.</p>
<p>關於提到的 EUV（極紫外）光刻技術，其採用波長爲 13.5nm 的紫外光用於光刻，因爲波長遠小於當前使用的 193nm 光源，因爲光的衍射帶來的精度問題將大大減小，但小波長意味着非常高的能量（正比於光波的頻率，反比于波長），因此如何得到穩定、合適、大功率的光源是一個極難的問題，同時因爲極小的波長，普通用於聚焦的透鏡將無法使用，只能使用反射式透鏡，這也是一個極難的問題。據說目前 TSMC 非常看好此項技術，已經入手好幾臺了，只是 Intel 仍然按兵不動，據說還要接着弄 multiple patterning。</p>
<p>貼一張圖，給大家一個簡單的認識, ASML 的某個型號的 EUV 光刻機，猜測是 NXE 33XX 的某個型號。售價 120 Million Dollar，合人民幣 7.2 億元，需要動用波音 747 運輸 11 架次才能從荷蘭運抵目的地。半導體產業是知識密集型，資本密集型工業，只有大佬們玩得起。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/49022631520b2055d252de5d63320ea1_b.jpg" alt="">
</div>
</div>




</div>


</div>
</div>