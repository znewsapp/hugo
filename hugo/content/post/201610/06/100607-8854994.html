+++
date = "2016-10-06T07:00:00"
title = "上網就躲不開的 Cookie，十幾年來風雲變幻"
titleimage = "http://pic4.zhimg.com/694cd52b07889c7149fae23a5cba01fb.jpg"
ga = 100607
+++

<div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">



<div class="question">
<h2 class="question-title">互聯網風雲之 Cookie 之爭</h2>
<div class="answer">



<div class="content">
<p>想到之前<a class="internal" href="http://zhuanlan.zhihu.com/p/20542246">寫了一篇文章談</a>到了互聯網推廣，看了一些文章和答案感覺還是很多人不知道這個到底是如何運作的或者說的不夠徹底，但是在這個時代，有必要了解互聯網推廣的原理，不然很多科技業的動態或者社會事件背後的動機以及各種糾葛和隱意大概只能看個表面，斗膽想從從這個角度入手寫幾篇文章。</p>
<p>從 Cookie 說起也許是個不錯的角度，是的，就是 315 曾曝光的 Cookie-1993 由網景員工 Lou Montulli 爲了辨別用戶身份而儲存在用戶本地終端（比如電腦）上的數據文件。</p>
<p><strong>網站瀏覽記錄：<br></strong>第一方 Cookie</p>
<img class="content-image" src="https://pic4.zhimg.com/fcfe807e43e6f40c710c8542ce3981e7_b.png" alt="">
<p>簡單來說 - 用戶打開瀏覽器訪問網站 A，這會在用戶的電腦上生成一個 Cookie，下次訪問網站 A 的時候，網站 A 可以辨別用戶。</p>
<img class="content-image" src="https://pic3.zhimg.com/11ab9ddb494261d2e8daf9bc9648459a_b.jpg" alt="">
<p>互聯網時代初期，各種網站越來越多，如何有效的找到準確的信息呢? 幾個年輕人就是從這個問題入手建立了一個網站內容檢索引擎也就是 Google.com，從巨頭不太在乎的邊際開始逆襲之旅。</p>
<p>對於網站的運營者，他們想要的是網站的排名在搜索結果內排名靠前來爭奪更多的的訪問量，訪問量就是互聯網的圈地運動，於是爲了在 Google 創建的內容引索生態環境內爭排名成了重要考覈標準之一，於是還需要一個工具用來幫助分析內容表現和訪問統計數據，最開始這些一般都是在網站服務器端提供的，爲了解決這個問題 Google 推出了免費的 Google Analytics-<strong>GA</strong>。</p>
<p>以免費，安裝方便和簡潔頁面獲得了大量網站青睞，訪問網站的時候它會生成一組第一方 Cookie 收集數據併發送到 Google 服務器，管理員登陸 GA 後臺就可以查看統計數據，作報告和結合其他的工具提升網站的搜索排名也叫&nbsp;<strong>SEO</strong>。</p>
<p>Google 在佔據搜索市場大片份額後急需解決盈利的問題，於是 Adwords 橫空出世,也就是讓網站可以付費顯示在搜索結果的第一頁。爲了讓廣告的覆蓋面更廣還推出 Adsense 拿出一部分廣告分紅讓 Adsense 推廣佔領一片大小網站 -<strong>推廣聯盟</strong>。後來由於上網速度的提升，一個基於圖片廣告技術的公司 DoubleClick 出現了，它可以讓網站出售圖片廣告位給廣告商，被 Google 收購後就形成了著名的&nbsp;<strong>Google Display Network</strong>。</p>
<p>從此成爲 Google 的大部分收入來源一直到現在，同時也是很多知名網站的收入來源，廣告 - 從來就是互聯網(或任何媒體)的重要盈利模式之一。</p>
<p>第三方 Cookie</p>
<img class="content-image" src="https://pic1.zhimg.com/c2cceb62245541ca789d42f4ac6b3734_b.png" alt="">
<p>最初 Adsense 是顯示和網頁上內容相關的廣告，但是問題又來了，廣告主會問如何提高點擊的效率呢? 除了展示和內容相關的廣告，可不可以根據用戶之前的瀏覽記錄來顯示廣告? 答案是第三方 Cookie，它由於不根據網站域名儲存所以可以實現跨站讀取從而記錄用戶瀏覽 A 到 B 等多個網站的歷史。</p>
<p>Google 只需要更改 Adsense/DoubleClick 的顯示算法，廣告主們設定推廣的範圍就可以進一步提升點擊效率或者叫廣告點擊率。</p>
<p>現在市場上所有的精確推廣平臺基本上都會使用到第三方 Cookie.</p>
<p>他們以各種形式廣泛存在 - 比如社交網絡相關的插件：點贊，登錄，評論框,分享工具,輸入法等。Times 雜誌網站上就有大約 26 中不同的跟蹤碼。</p>
<img class="content-image" src="https://pic4.zhimg.com/77433041a511aee1ecccc340f5bc31b7_b.jpg" alt="">
<p><strong>智能手機出世：</strong></p>
<p>喬幫主冥想後祭出了改變互聯網格局的 iPhone，從此互聯網進入了電腦 + 智能手機的時代，通過 App 的閉環生態直接讓用戶和內容連接，在 2005 年 Google 悄悄收購了一個手機軟件 Android 爲下一個搜索的前沿 - 無線設備佈局，佩奇的眼光不得不說相當毒辣，當然業界也流傳者 Larry 和喬幫主因爲手機端操作軟件而交惡的軼事，我個人感覺英雄有對手纔不會寂寞，現在都是歷史了，目前智能手機端已超過 PC 端成爲重要上網入口，這個你可以從各大新聞上看到一些互聯網公司的部門調整。而市場上開源的 Android 和生產商聯盟和閉環的 iOS 多方面交戰。</p>
<p>隨着上網速度越來越快，視頻網站 YouTube 的興起再次改變互聯網可以提供額的媒體類別，Google 再把它收入囊中後加上 AdMob 形成了：search+website+mobile+YouTube+ 聯盟的廣告 Display network 格局，進一步鞏固自己的互聯網流量和廣告霸主的地位。</p>
<p>但就如當年靠搜索起家，社交網絡 Facebook 和 Twitter 等的崛起是新的邊際革命，加上 Apple 的硬件 +App+iTunes 的模式，構成了目前互聯網推廣業<a class=" wrap external" href="https://link.zhihu.com/?target=https%3A//marketingsmokeandmirrors.wordpress.com/2013/05/12/marketing-technology-landscape/" target="_blank" rel="nofollow noreferrer">主要的幾個平臺</a>。國內的互聯網廣告平臺感覺 RTB 的<a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//www.rtbchina.com/china-display-ad-tech-ecosystem" target="_blank" rel="nofollow noreferrer">這個圖</a>整理的不錯。</p>
<p>在線公告收入比(US)：</p>
<img class="content-image" src="https://pic4.zhimg.com/2421b6475f2b97c42d70f6b642b3916f_b.jpg" alt="">
<p>再次回到追蹤，之前提到 Google Analytics 只是提供網頁的統計和幫助站長提升 SEO 排名等，由於移動互聯網的到來產生了一個新問題 - 如何實現跨網站和手機端追蹤，因爲廣告主在乎的是精確推廣和提升廣告點擊的效率並想了解推廣效果，於是在統計工具方面 GA 迎來了更新狂潮目標可不只是幫助廣告主客和企業跨設備推廣還有更遠大的目標 - 打通推廣到商業等數據的連接 -<strong>大數據</strong>。</p>
<p><strong>跨設備追蹤：</strong></p>
<img class="content-image" src="https://pic1.zhimg.com/170b6ca9f376f59ba07df33887db4a64_b.png" alt="">
<p>雖然之前的圖我用一個笑臉代替，但嚴格意義上那其實是一個瀏覽器，因爲大部分的 Analytics 工具對訪問者的定義是 Unique Visitor(UV) 等同於 Unique browser+ 一些 Cookie 裏的系統識別信息。</p>
<p>這在網頁時代還可以勉強接受，在數字時代不能再如此簡單的假設了，因爲用戶行爲發生了變化，白天用手機 - 回家用電腦 - 睡覺前用 iPad 是多少人的習慣了? 雖然來源自同<strong>一個人</strong>但由於 GA 分析基於 Cookie 的技術現實，這就對基於用戶的整合和分析提出了挑戰。廣告主們想精準定位廣告，而 Google 必須保住自己的收入來源，但隨智能移動設備的出現和流行讓這變成了一個很棘手的問題。</p>
<p><strong>第一種想法繼續挖掘第三方 Cookie：</strong>在網站和 app 上都支持同一個第三方 Cookie 不就可以了嗎? 首先只有免費 App 會顯示廣告(admob)，還有用戶一般不能容忍小屏幕上的廣告，還有平臺問題雖然 Google 掌控 Android 和 Play store 並支持第三方 Cookie，但是 iOS 不允許第三方 Cookie 的，從 iOS 9 以後開始支持推出 Adblock 公然攔截第三方 Cookie 這招夠狠，當年禁 Flash 一樣快準狠。</p>
<img class="content-image" src="https://pic2.zhimg.com/7a1d1380fb9ac89d52fa16828634b8a1_b.png" alt="">
<p><strong>第二種想法是跨平臺登錄：</strong>必須推廣單一帳號登陸系統，鼓勵 Search，Google plus，Google drive，YouTube 等全部使用同一個帳號(最好是 Gmail)登錄，同時推行互聯登陸平臺&nbsp;<strong>SSO&nbsp;</strong>功能。</p>
<p>在廣告主端則推出方案使企業讓用戶在網站上和 App 上登陸，把網站的訪問記錄和 App 登陸記錄同時綁定一個 User-id，然後發送到 Google Analytics，達到基於用戶這個角度的分析目的 (雖然此方案尚有缺陷，不細談)。</p>
<p><strong>第三種想法是通向更根本的上網端比如從 Browser 入手：</strong>一種是瀏覽器本身的數據同步，還有跨瀏覽器的 PREF Cookie，原因是以上兩種方案的漏洞畢竟不能強迫用戶登錄和統治操作系統(以前貌似經歷過那個時代)。</p>
<p><strong>PREF Cookie：<br></strong>一些熟練的電腦用戶知道如何清除 Cookie，瀏覽器的無痕瀏覽模式和 Https 協議可以做到加密 / 隱藏自己的瀏覽記錄等信息，但是有研究人員在瀏覽器上發現了<a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//blogs.wsj.com/digits/2012/02/28/the-google-cookie-that-seems-to-come-out-of-nowhere/" target="_blank" rel="nofollow noreferrer">神祕的 Cookie</a>，通過一個 unique id，它在無痕瀏覽模式下存在，在 Safari 下存在 - 實現了跨瀏覽器跟蹤。</p>
<p>因爲 Safe Browsing 計劃，瀏覽器會 Ping Google 的服務器已鑑別要打開的網站是不是有安全警告，在這個過程中 Google 會設置一個 Cookie。</p>
<img class="content-image" src="https://pic3.zhimg.com/572e64a294fc5791cd2134c1b4917a96_b.png" alt="">
<p>另外的應用 -PREF Cookie 被 NSA 美國國家安全局相中用來跟蹤和黑入目標用戶，整合其他資源確認目標位置等，<a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//www.businessinsider.com.au/the-nsa-uses-google-cookies-for-hacking-2013-12%3Fr%3DUS%26IR%3DT" target="_blank" rel="nofollow noreferrer">Snowden 的爆料 NSA 的跟蹤和監控超越了追蹤已懷疑的目標，而是先全部監控再確認或推測目標</a>，同時也是科技公司的廣告技術被政府利用的大爆料而不是陰謀論。</p>
<img class="content-image" src="https://pic4.zhimg.com/c92205af0707571412708e83565a02eb_b.png" alt="">
<p><strong>跨地域追蹤：<br></strong>如果基於瀏覽記錄的網絡廣告推廣算是第一個維度的話，那麼基於物理位置的推廣可以算第二維度，PC 端互聯網時代基本上根據 IP 地址來確認地理位置，到了移動互聯網時代選擇變得多了起來，可以通過綜合方式：IP+GPS+ 信號塔 +WiFi+ 藍牙 + 搜索記錄 +Google Maps+ 分享位置信息的 App 的組合方式監測物理位置，並且更精確。有的方式甚至在手機沒有電但是有電池在就可能被檢測到位置信息的可能。</p>
<p>關於 IP 還有另外一個話題，IPv4 和 IPv6，IPv4 由於數量有限所以會產生必須分享 IP 的狀態所以由此估計的地址準確率會受影響，IPv6 龐大的數量足以讓地球上的每一個人都擁有數十億個 IP 地址，位置追蹤將更準確。</p>
<img class="content-image" src="https://pic3.zhimg.com/77614e1c85794de70549518f0c9f959e_b.png" alt="">
<p><strong>追蹤人口特徵：</strong></p>
<p>人口特徵比如性別，年齡或興趣愛好等是第三個維度，其實這是社交網絡 Facebook 開的頭，從此廣告主們推廣姿勢再上了一個維度。至於 Google 如何知道這些信息的呢? 看 Google 怎麼回答：</p>
<img class="content-image" src="https://pic3.zhimg.com/d51106867ca18bb77163c0e256f748d2_b.png" alt="">
<p>基本上就是之前提到的 Display network 加上其他的多方面來源，同時把 iOS 拉來站隊。</p>
<p><strong>設備到人追蹤 - 連接 CRM：<br></strong></p>
<img class="content-image" src="https://pic3.zhimg.com/c96be74486b4095bb7fb47e50f576f4e_b.png" alt="">
<p>回到廣告主跨設備，跨平臺用戶追蹤和分析的需求，需要提供一整套從數據收集，數據存儲，數據分析的方案，或買或整合。</p>
<p>Sensors 是包含使用 measurement protocol 手段採集線下數據：比如收銀設備，電話等，再加上渠道歸因模型(一種計算各種推廣渠道輔助效果的算法)的推出和 Data warehouse 解決方案，一個現時代企業級的互聯網點到點推廣平臺的模樣。</p>
<p>同時在跨平臺追蹤方面上大公司們正在加強尋找超越 Cookie 的技術，比如上邊提到的 PREF 到 HTML headers，或者直接投資基礎互聯網連接設備和基礎設施。</p>
<p>由 EFF 領導的互聯網隱私組織推行&nbsp;<strong>Do-Not-Track&nbsp;</strong>退出追蹤請求，一方面是瀏覽器而另一方是互聯網網站和廣告商們，只有同時支持的情況下用戶纔不會被追蹤，目前這個是自願支持的模式。</p>
<p>而至於&nbsp;<a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//www.wired.com/2016/03/heres-how-that-adblocker-youre-using-makes-money/" target="_blank" rel="nofollow noreferrer">Ad-block，Ghostery 等插件也被爆出</a>通過廣告過濾白名單或出售數據變現，那句話怎麼說的來着 - 天下攘攘皆爲利往。</p>
<p>而&nbsp;<a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//www.ftchinese.com/story/001067020" target="_blank" rel="nofollow noreferrer">Brave 瀏覽器</a>又動了誰的奶酪?</p>
<p><strong>小結：</strong></p>
<p>Google 通過搜索引擎的創新掌握了互聯網入口，逆襲 Microsoft，推出 Adwords 是公司開始盈利後推出 Adsense 和收購 Doubleclick，YouTube 等形成了在線公告聯盟，智能手機的出現讓互聯網從桌面變到移動，線上線下的數據整合提出了新的挑戰，同時社交網絡的出現讓更有針對性的廣告推廣變爲可能，Google 不斷髮力整合資源目的是保證自己在線廣告推廣的吸引性，同時發力分析工具和大數據爲企業提供點到點商業分析解決方案。</p>
<p>跨設備,跨平臺,跨程序的用戶追蹤變的越來越重要，巨頭們在尋找超越 Cookie 的技術，整個互聯網大潮都在瘋狂的收集和整合關於人的信息，似乎<strong>勢不可擋</strong>。</p>
<p>但是互聯網推廣科技巨頭們可能面臨的可能來自隱私，知情權，壟斷，市場規範，法律和國家安全的考驗，尤其在 Snowden 棱鏡門之後的歐洲。</p>
<p>對於互聯網內容方來說也面臨一個抉擇到底通過哪種方式變現? 是閉環廣告還是開放廣告，內容植入還是直接收費?</p>
<p><a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//sspai.com/32673" target="_blank" rel="nofollow noreferrer">Apple 宣佈將關閉 iAd 平臺</a>。</p>
<p><a class=" wrap external" href="https://link.zhihu.com/?target=http%3A//marketingland.com/linkedin-shutters-ad-network-focusing-resources-on-sponsored-content-162973" target="_blank" rel="nofollow noreferrer">linked-in 關閉了自己的廣告平臺轉而投入贊助內容服務</a>。</p>
<p><strong>互聯網模式：</strong></p>
<img class="content-image" src="https://pic3.zhimg.com/e576900494366446e839cbdac1dd63aa_b.png" alt="">
<p>從獲取營收 / 商業利益的角度來看，科技公司推出免費產品並在各個方面發力完成用戶數據的收集，整合做<strong>用戶畫像</strong>來爭奪廣告主的青睞是<strong>必然</strong>的。</p>
<p>而一旦互聯網推廣業的基礎面臨危機 / 顛覆很可能直接對人們習慣了的互聯網模式造成衝擊。</p>
<p>本篇無意做價值判斷只想做事實陳述，關於科技公司的理想的部分不談了，有興趣的可以閱讀《刪除：大數據取捨之道》《浪潮之巔》《信息簡史》《必然》《失控》等書籍 。</p>
<p>其實，這些書我還在找時間啃&hellip;&hellip;</p>



</div>
</div>
</div>


</div>
</div>